# 并行程序设计基础
### 并行程序设计概述
#### 并行编程风范
* 相并行
  * 一组超级步
    > 步内各自计算,步间通信和同步
  * BSP
  * 计算和通信不重叠
  * 方便差错和性能分析
* 分治并行
  * 主进程把负载分割并指派给子进程
  * 递归+归并
  * 难以负载平衡
* 流水线并行
  * 一组进程
  * 流水线作业
* 主从并行
  * 主子进程
    > 主:串行,协调;子:计算任务
  * 划分设计技术
  * 主进程易成瓶颈
* 工作池并行
  * 任务进池出池
  * 易负载平衡
  * 临界区问题
### 并行程序设计基本问题
##### 进程同构性
* SIMD
  > 所有进程在同一时间执行相同的指令
* MIMD
  > 各个进程在同一时间可以执行不同的指令
  * SPMD(数据并行)
    > 各个进程同构,多个进程对不同的数据执行相同的代码
  * MPMD(任务并行)
    > 各个进程异构,多个进程执行不同的代码
##### 静态和动态并行性
静态并行性
> 程序的结构以及进程的个数在运行前就可以确定

动态并行性
> 进程在运行时候创建和终止

##### 进程分配
划分与分配
> 使系统大部分时间忙于计算,而不是闲置或忙于交互,同时不牺牲并行度

分配方式
* 显式分配
  > 用户指定数据和负载如何加载
* 隐式分配
  > 由编译器和运行时支持系统决定

就近分配原则
> 进程所需的数据靠近使用它的进程代码

##### 并行粒度
并行度(DOP)
> 同时执行的分进程数

并行粒度
> 两次并行或交互操作之间所执行的计算负载
* 指令级并行
* 块级(数据级)并行
* 进程级(控制级)并行
* 任务级并行

并行度和并行粒度大小常互为倒数

##### 进程交互
> 进程间相互影响

类型:
* 通信
  > 多个进程间传送数据
  * 共享变量
  * 父进程传给子进程
  * 消息传递
* 同步
  > 进程间相互等待或继续执行的操作
* 聚集
  > 用一串超步将各分进程计算所得的部分结果合并为一个完整的结果

##### 交互的模式
分类:
  * 能否在编译时确定
    * 静态的
    * 动态的
  * 多少发送者和接收者参与
    * 一对一
      > 点到点
    * 一对多
      > 广播,散播
    * 多对一
      > 收集,归约
    * 多对多
      > 全交换,扫描,置换/移位
##### 同步
原子同步
> 不可分的操作

控制同步(路障,临界区)
> 进程的所有操作必须等待到达某一控制状态

数据同步(锁)
> 是程序执行必须等待到某一数据状态
##### 聚集
聚集方式
* 归约
* 扫描
### 并行程序设计模型
##### 隐式并行模型
> 编译器或运行支持系统自动转化为并行代码,并实施计算的调度和数据和安排

特点
> 语义简单,可移植性好,单线程,易于调试和验证正确性  
> 效率低

* 显示并行
  > 程序员主动并行化,包括任务分解,映射任务到处理器等
  * 类型
    > 数据并行,共享存储,消息传递

##### 数据并行模型

##### 共享存储/共享变量模型
##### 消息传递模型
