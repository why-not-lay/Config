# 静态链接

### 1. 地址空间与地址分配
最终可执行文件的各段编排
#### 1.1. 按序叠加
将输入的目标文件按照次序叠加，依次合并

##### 问题
如果一个输出文件需要大量的目标文件，每个目标文件都会有自己的.text，.data，.bss段等，最后会造成大量的内碎片。
> 因为对于每个段都有一定的地址和空间对其要求，例如在x86中就是页

#### 1.2.相似段合并()
同名段合并（现在一般采用这种）

##### 两步链接
1. 空间和（虚拟）地址的分配
    * 扫描输入的目标文件，获取各个段的长度、属性和位置，合并
    * 收集所有符号和符号定义，引用，统一放到全局符号表中
    * 计算合并后各个段的长度和位置，并建立映射关系
2. 符号解析和重定位(核心)

#### 1.2. 符号解析和重定位

##### 重定位表
利用重定位表(重定位段)，每有一个段需要重定位就会有一个对应的重定位表

##### COMMON块
解决不同类型的弱符号共存问题
> 本质上是链接器并不知道符号的类型，无法判断符号的类型是否一致

#### 1.3. 静态库链接

指令`ar`：将目标文件压缩并进行编号和索引



