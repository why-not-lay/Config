# make
> 用于构建,依赖Makefile文件构建(可用命令指定其他文件)  
> [make](https://www.ruanyifeng.com/blog/2015/02/make.html)  
* Make命令执行的时候如果没有指定目标,默认执行Makefile文件中的第一个目标
### Makefile文件格式
~~~
<target> : <prerequisites>
[tab] <commands>
~~~
* target(目标)
  * 一个target构建一条规则,通常为文件名,可以是多个文件名之间用空格隔开  
  * 伪目标:如果目标不是文件名而是一个操作的名字,需用`.PHONY: <target name>`声明
* prerequisites(前置条件)
  * 指定了"目标"是否重新构建的判断标准:只要有一个前置文件不存在或有过更新就重新构建
  * 通常是一组文件名,之间用空格空开
* commands(命令)
  * 表示如何更新目标文件
  * 由一行或多行shell命令组成,每行命令前必须有一个tab键(若用其他键虚用`.RECIPEPREFIX =`声明)
  * 每一行命令是在单独的一个shell中执行(命令前后没有继承关系),若要多个命令在同一个shell中执行
    * 可将多条命令写在同一行之间用`;`隔开
    * 在换行符前添加`\`
    * 用`.ONESHELL:`声明
* 注释
  > `#`注释符号
* 回声(echoing)
  > 默认情况下,make会打印每条命令后再执行,若要关闭回声在命令前添加`@`
* 通配符
  > 与bash一致,适用`*`,`?`,`...`
* 模式匹配
  > 允许对文件名进行类似的正则运算,例如`%`
* 变量和赋值
  > 允许用`=`自定义变量,调用时,变量需放在`$()`中
* 自动变量
  * `$@`
    > 指代当前目标,就是make构建的那个目标
  * `$<`
    > 指代第一个前置条件
  * `$?`
    > 指代比目标更新的所有前置条件
  * `$^`
    > 指代所有前置条件
  * `$*`
    > 指代匹配符%匹配的部分
  * `$(@D)`和`$(@F)`
    > 分别指向$@的目录名和文件名
  * `$(<D)`和`$(<F)`
* 判断和循环
  > Bash语法
* 函数
~~~
$(function arguments)
# 或者
${function arguments}
~~~
  * shell函数
    > 执行shell命令
  * wildcard函数
    > 替换Bash中的通配符
  * subst函数
    > 文本替换 
  * patsubst函数
    > 模式匹配替换



